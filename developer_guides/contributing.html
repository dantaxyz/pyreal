
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Contributing to Pyreal &#8212; Pyreal 0.2.0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../_static/dai-logo-white.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Developer Guides" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/dai-logo-white-200.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../getting_started/index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../user_guides/index.html">
  User Guides
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api_reference/index.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Developer Guides
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/dai-lab/pyreal" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Contributing to Pyreal
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#types-of-contributions">
   Types of Contributions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#report-bugs">
     Report Bugs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fix-bugs">
     Fix Bugs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#implement-features">
     Implement Features
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#write-documentation">
     Write Documentation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#submit-feedback">
     Submit Feedback
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#get-started">
   Get Started!
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pull-request-guidelines">
   Pull Request Guidelines
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#unit-testing-guidelines">
   Unit Testing Guidelines
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#benchmarking-guidelines">
   Benchmarking Guidelines
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tips">
   Tips
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#style-guide">
   Style guide
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#release-workflow">
   Release Workflow
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="contributing-to-pyreal">
<span id="contributing"></span><h1>Contributing to Pyreal<a class="headerlink" href="#contributing-to-pyreal" title="Permalink to this headline">#</a></h1>
<p>Contributions are welcome, and they are greatly appreciated! Every little bit
helps, and credit will always be given.</p>
<p>You can contribute in many ways:</p>
<section id="types-of-contributions">
<h2>Types of Contributions<a class="headerlink" href="#types-of-contributions" title="Permalink to this headline">#</a></h2>
<section id="report-bugs">
<h3>Report Bugs<a class="headerlink" href="#report-bugs" title="Permalink to this headline">#</a></h3>
<p>Report bugs at the <a class="reference external" href="https://github.com/sibyl-dev/pyreal/issues">GitHub Issues page</a>.</p>
<p>If you are reporting a bug, please include:</p>
<ul class="simple">
<li><p>Your operating system name and version.</p></li>
<li><p>Any details about your local setup that might be helpful in troubleshooting.</p></li>
<li><p>Detailed steps to reproduce the bug.</p></li>
</ul>
</section>
<section id="fix-bugs">
<h3>Fix Bugs<a class="headerlink" href="#fix-bugs" title="Permalink to this headline">#</a></h3>
<p>Look through the GitHub issues for bugs. Anything tagged with “bug” and “help
wanted” is open to whoever wants to implement it.</p>
</section>
<section id="implement-features">
<h3>Implement Features<a class="headerlink" href="#implement-features" title="Permalink to this headline">#</a></h3>
<p>Look through the GitHub issues for features. Anything tagged with “enhancement”
and “help wanted” is open to whoever wants to implement it.</p>
</section>
<section id="write-documentation">
<h3>Write Documentation<a class="headerlink" href="#write-documentation" title="Permalink to this headline">#</a></h3>
<p>Pyreal could always use more documentation, whether as part of the
official Pyreal docs, in docstrings, or even on the web in blog posts,
articles, and such.</p>
</section>
<section id="submit-feedback">
<h3>Submit Feedback<a class="headerlink" href="#submit-feedback" title="Permalink to this headline">#</a></h3>
<p>The best way to send feedback is to file an issue at the <a class="reference external" href="https://github.com/sibyl-dev/pyreal/issues">GitHub Issues page</a>.</p>
<p>If you are proposing a feature:</p>
<ul class="simple">
<li><p>Explain in detail how it would work.</p></li>
<li><p>Keep the scope as narrow as possible, to make it easier to implement.</p></li>
<li><p>Remember that this is a volunteer-driven project, and that contributions
are welcome :)</p></li>
</ul>
</section>
</section>
<section id="get-started">
<h2>Get Started!<a class="headerlink" href="#get-started" title="Permalink to this headline">#</a></h2>
<p>Ready to contribute? Here’s how to set up <code class="docutils literal notranslate"><span class="pre">pyreal</span></code> for local development.</p>
<ol class="arabic">
<li><p>Fork the <code class="docutils literal notranslate"><span class="pre">pyreal</span></code> repo on GitHub.</p></li>
<li><p>Clone your fork locally and cd into the new directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone git@github.com:your_name_here/pyreal.git
$ cd pyreal
$ git checkout dev
</pre></div>
</div>
</li>
<li><p>Install the project dependencies using Poetry.
Set up your fork for local development using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ poetry install
</pre></div>
</div>
</li>
<li><p>Create a branch for local development. You should always be branching off of
the <code class="docutils literal notranslate"><span class="pre">dev</span></code> branch when contributing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout -b name-of-your-bugfix-or-feature
</pre></div>
</div>
<p>Try to use the naming scheme of prefixing your branch with <code class="docutils literal notranslate"><span class="pre">gh-X</span></code> where X is
the associated issue, such as <code class="docutils literal notranslate"><span class="pre">gh-3-fix-foo-bug</span></code>. And if you are not
developing on your own fork, further prefix the branch with your GitHub
username, like <code class="docutils literal notranslate"><span class="pre">githubusername/gh-3-fix-foo-bug</span></code>.</p>
<p>Now you can make your changes locally.</p>
</li>
<li><p>While hacking your changes, make sure to cover all your developments with the required
unit tests, and that none of the old tests fail as a consequence of your changes.
For this, make sure to run the tests suite and check the code coverage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ poetry run invoke lint       # Check code styling
$ poetry run invoke test       # Run the tests
$ poetry run invoke coverage   # Get the coverage report
</pre></div>
</div>
<p>All of these commands can be shortened by running within the Poetry shell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ poetry shell      # activate the poetry shell
$ invoke lint       # Check code styling
$ invoke test       # Run the tests
$ invoke coverage   # Get the coverage report
</pre></div>
</div>
</li>
<li><p>Make also sure to include the necessary documentation in the code as docstrings following
the <a class="reference external" href="https://google.github.io/styleguide/pyguide.html?showone=Comments#Comments">Google docstrings style</a>.
Test docs are working by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ poetry run invoke view-docs
</pre></div>
</div>
</li>
<li><p>Any PR that includes a new <cite>Explainer</cite> class, significant changes to an existing <cite>Explainer</cite>
class, or significant changes to the explanation workflow as a whole should also include
the results of a benchmarking run. See <a class="reference internal" href="#benchmarking-guidelines"><span class="std std-ref">Benchmarking Guidelines</span></a> for more info.</p></li>
<li><p>After running all four commands listed in steps 5 and 6 and
confirming they work correctly, commit your changes and push your branch to GitHub:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git add .
$ git commit -m &quot;Your detailed description of your changes.&quot;
$ git push origin name-of-your-bugfix-or-feature
</pre></div>
</div>
</li>
<li><p>Submit a pull request through the GitHub website, merging back into <code class="docutils literal notranslate"><span class="pre">dev</span></code>.</p></li>
<li><p>Branches should be deleted on merge.</p></li>
</ol>
</section>
<section id="pull-request-guidelines">
<h2>Pull Request Guidelines<a class="headerlink" href="#pull-request-guidelines" title="Permalink to this headline">#</a></h2>
<p>Before you submit a pull request, check that it meets these guidelines:</p>
<ol class="arabic simple">
<li><p>It resolves an open GitHub Issue and contains its reference in the title or
the comment. If there is no associated issue, feel free to create one.</p></li>
<li><p>Whenever possible, it resolves only <strong>one</strong> issue. If your PR resolves more than
one issue, try to split it in more than one pull request.</p></li>
<li><p>The pull request should include unit tests that cover all the changed code.</p></li>
<li><p>If the pull request adds functionality, the docs should be updated. Put
your new functionality into a function with a docstring, and add the
feature to the documentation in an appropriate place.</p></li>
<li><p>The pull request should work for all the supported Python versions. Confirm that
all github actions pass.</p></li>
</ol>
</section>
<section id="unit-testing-guidelines">
<h2>Unit Testing Guidelines<a class="headerlink" href="#unit-testing-guidelines" title="Permalink to this headline">#</a></h2>
<p>All the Unit Tests should comply with the following requirements:</p>
<ol class="arabic simple">
<li><p>Unit Tests should be based only in unittest and pytest modules.</p></li>
<li><p>The tests that cover a module called <code class="docutils literal notranslate"><span class="pre">pyreal/path/to/a_module.py</span></code>
should be implemented in a separated module called
<code class="docutils literal notranslate"><span class="pre">tests/pyreal/path/to/test_a_module.py</span></code>.
Note that the module name has the <code class="docutils literal notranslate"><span class="pre">test_</span></code> prefix and is located in a path similar
to the one of the tested module, just inside the <code class="docutils literal notranslate"><span class="pre">tests</span></code> folder.</p></li>
<li><p>Each method of the tested module should have at least one associated test method, and
each test method should cover only <strong>one</strong> use case or scenario.</p></li>
<li><p>Test case methods should start with the <code class="docutils literal notranslate"><span class="pre">test_</span></code> prefix and have descriptive names
that indicate which scenario they cover.
Names such as <code class="docutils literal notranslate"><span class="pre">test_some_methed_input_none</span></code>, <code class="docutils literal notranslate"><span class="pre">test_some_method_value_error</span></code> or
<code class="docutils literal notranslate"><span class="pre">test_some_method_timeout</span></code> are right, but names like <code class="docutils literal notranslate"><span class="pre">test_some_method_1</span></code>,
<code class="docutils literal notranslate"><span class="pre">some_method</span></code> or <code class="docutils literal notranslate"><span class="pre">test_error</span></code> are not.</p></li>
<li><p>Each test should validate only what the code of the method being tested does, and not
cover the behavior of any third party package or tool being used, which is assumed to
work properly as far as it is being passed the right values.</p></li>
<li><p>Any third party tool that may have any kind of random behavior, such as some Machine
Learning models, databases or Web APIs, will be mocked using the <code class="docutils literal notranslate"><span class="pre">mock</span></code> library, and
the only thing that will be tested is that our code passes the right values to them.</p></li>
<li><p>Unit tests should not use anything from outside the test and the code being tested. This
includes not reading or writing to any file system or database, which will be properly
mocked.</p></li>
</ol>
</section>
<section id="benchmarking-guidelines">
<span id="benchmarking"></span><h2>Benchmarking Guidelines<a class="headerlink" href="#benchmarking-guidelines" title="Permalink to this headline">#</a></h2>
<p><strong>When to run benchmarking:</strong></p>
<p>PR’s should include results and logs from a new benchmarking run whenever:</p>
<ol class="arabic simple">
<li><p>A PR includes a new <code class="docutils literal notranslate"><span class="pre">Explainer</span></code> class. In this case, a new benchmark <code class="docutils literal notranslate"><span class="pre">Challenge</span></code> class
must also be added (see below).</p></li>
<li><p>A PR includes <em>significant</em> changes to an existing <code class="docutils literal notranslate"><span class="pre">Explainer</span></code> class
(when in doubt, ask reviewers).</p></li>
<li><p>A PR includes <em>significant</em> changes to the general fit-produce explanation workflow.</p></li>
</ol>
<p>It’s a good idea to run the benchmarking procedure for all PRs, as it can catch subtle
bugs that may be missed by other tests (if this happens, it should be reported in a Github
issue, so more tests can be added). However, unless a PR falls under one of the categories
listed above, results and logs should <strong>not</strong> be pushed to the repo.</p>
<p><strong>How to run benchmarking</strong></p>
<p>The benchmarking process can be run using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ poetry run invoke benchmark
</pre></div>
</div>
<p>This will run the process, and save the results to <code class="docutils literal notranslate"><span class="pre">pyreal/benchmark/results</span></code>.</p>
<p>To run the benchmarking process without leaving a results directory (ie, for testing):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ poetry run invoke benchmark-no-log
</pre></div>
</div>
<p>This will run the process, and delete the results directory at the end.</p>
<p>To run the benchmarking process while downloading the benchmark datasets locally
(this will speed up future runs):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ poetry run invoke benchmark-download
</pre></div>
</div>
<p><strong>Adding challenges</strong></p>
<p>If your PR adds a new <code class="docutils literal notranslate"><span class="pre">Explainer</span></code> class, you must add a corresponding <code class="docutils literal notranslate"><span class="pre">Challenge</span></code> class in the
same PR. To do so, follow these steps:</p>
<ol class="arabic">
<li><p>Add a file called <code class="docutils literal notranslate"><span class="pre">[$explainer_name]_challenge.py</span></code> to the corresponding place in
<code class="docutils literal notranslate"><span class="pre">pyreal/benchmark/challenges</span></code>.</p></li>
<li><p>Fill this file out using this template, following the example of the others:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ class [$ExplainerName]Challenge(ExplainerChallenge):
$    def create_explainer(self):
$        return [$ExplainerName](model=self.dataset.model, x_train_orig=self.dataset.X,
                                 transformers=self.dataset.transforms, fit_on_init=True)
</pre></div>
</div>
</li>
<li><p>Add the new challenge to <code class="docutils literal notranslate"><span class="pre">pyreal/benchmark/main.get_challenges()</span></code></p></li>
</ol>
</section>
<section id="tips">
<h2>Tips<a class="headerlink" href="#tips" title="Permalink to this headline">#</a></h2>
<p>To run a subset of tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -m pytest tests.test_global_explanation.py
$ python -m pytest -k &#39;foo&#39;
</pre></div>
</div>
</section>
<section id="style-guide">
<h2>Style guide<a class="headerlink" href="#style-guide" title="Permalink to this headline">#</a></h2>
<p>Pyreal uses the <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a> style guide for all python code:</p>
<p>A few important notes:</p>
<ol class="arabic simple">
<li><p>Indents should be 4 spaces, no tabs</p></li>
<li><p>Lines should be no more than 99 characters long</p></li>
<li><p>All functions, classes, and methods should have block comment descriptions using the Google docstring format</p></li>
</ol>
</section>
<section id="release-workflow">
<h2>Release Workflow<a class="headerlink" href="#release-workflow" title="Permalink to this headline">#</a></h2>
<p>The process of releasing a new version involves several steps:</p>
<ol class="arabic simple">
<li><p>Create a new branch off of <code class="docutils literal notranslate"><span class="pre">dev</span></code> branch called <code class="docutils literal notranslate"><span class="pre">release-v.*.*.*</span></code>.</p></li>
<li><p>Update the version in <code class="docutils literal notranslate"><span class="pre">pyreal/__init__.py</span></code> and
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> files.</p></li>
<li><p>Make any final small changes needed, either directly on <code class="docutils literal notranslate"><span class="pre">release-v.*.*.*</span></code> or on a
feature branch that can then be merged into <code class="docutils literal notranslate"><span class="pre">release-v.*.*.*</span></code> with a PR.</p></li>
<li><p>Make a PR to merge <code class="docutils literal notranslate"><span class="pre">release-v.*.*.*</span></code> into <code class="docutils literal notranslate"><span class="pre">stable</span></code></p></li>
<li><p>Once merged, tag the merge commit in stable, and push the tag.
This will automatically deploy the release to pypi.</p></li>
<li><p>Merge <code class="docutils literal notranslate"><span class="pre">release-v.*.*.*</span></code> back into <code class="docutils literal notranslate"><span class="pre">dev</span></code> with a pull request</p></li>
<li><p>Make a release on github.com, filling in the release notes with
a list of pull requests made since the last release.</p></li>
</ol>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Developer Guides</p>
        </div>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2020, MIT Data To AI Lab.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>